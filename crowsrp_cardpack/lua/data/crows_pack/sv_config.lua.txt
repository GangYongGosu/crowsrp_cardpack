util.AddNetworkString("CrowsPack_RequestConfig")
util.AddNetworkString("CrowsPack_SendConfig")
util.AddNetworkString("CrowsPack_SaveConfig")

local function isAdmin(ply)
    return CrowsPack.Config.AdminRanks[ply:GetUserGroup()] or ply:IsSuperAdmin()
end

-- Send Config to Client
net.Receive("CrowsPack_RequestConfig", function(_, ply)
    if not isAdmin(ply) then return end
    net.Start("CrowsPack_SendConfig")
        net.WriteTable(CrowsPack.Config.MaxDistribution)
    net.Send(ply)
end)

-- Receive and Save Edited Config
net.Receive("CrowsPack_SaveConfig", function(_, ply)
    if not isAdmin(ply) then return end
    local newConfig = net.ReadTable()
    CrowsPack.Config.MaxDistribution = newConfig
    print("[CrowsPack] Admin " .. ply:Nick() .. " updated rarity distribution.")
end)
