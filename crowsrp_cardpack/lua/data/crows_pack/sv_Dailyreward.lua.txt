util.AddNetworkString(CROWS_TCG_DailyLoginReward)

local dailyCooldown = 86400 -- 24 hours

-- File saving method
local function GetLastClaim(ply)
    local id = crows_daily_ .. plySteamID64()
    return tonumber(file.Read(id, DATA) or 0)
end

local function SetLastClaim(ply, time)
    local id = crows_daily_ .. plySteamID64()
    file.Write(id, tostring(time))
end

hook.Add(PlayerInitialSpawn, CROWS_TCG_DailyCheck, function(ply)
    local last = GetLastClaim(ply)
    local now = os.time()

    if now - last = dailyCooldown then
        CROWS_TCG_AddTokens(ply, 25)
        SetLastClaim(ply, now)
        plyChatPrint([Goblin] You got your daily 25 tokens, don't forget to come back tomorrow!)
        surface.PlaySound(itemssmallmedkit1.wav)
    else
        local hours = math.ceil((dailyCooldown - (now - last))  3600)
        plyChatPrint([Goblin] No daily reward yet! Come back in  .. hours ..  hour(s).)
    end
end)
