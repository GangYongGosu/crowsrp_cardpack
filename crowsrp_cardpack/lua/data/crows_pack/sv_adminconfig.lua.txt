util.AddNetworkString("CrowsPack_Admin_CreatePack")

net.Receive("CrowsPack_Admin_CreatePack", function(len, ply)
    if not ply:IsSuperAdmin() then return end
    local name = net.ReadString()

    if not CROWS_PACK.Packs[name] then
        CROWS_PACK.Packs[name] = {
            rarityChances = {},
            cards = {},
            featured = false
        }

        file.Write("crows_pack/pack_settings.json", util.TableToJSON(CROWS_PACK.Packs, true))
        print("[CrowsPack] Admin created pack:", name)
    end
end)

util.AddNetworkString("CrowsPack_Admin_SavePackRarities")

net.Receive("CrowsPack_Admin_SavePackRarities", function(len, ply)
    if not ply:IsSuperAdmin() then return end

    local packName = net.ReadString()
    local rarities = net.ReadTable()

    if not CROWS_PACK.Packs[packName] then return end

    CROWS_PACK.Packs[packName].rarityChances = rarities
    file.Write("crows_pack/pack_settings.json", util.TableToJSON(CROWS_PACK.Packs, true))

    print("[CrowsPack] Updated rarities for:", packName)
end)
