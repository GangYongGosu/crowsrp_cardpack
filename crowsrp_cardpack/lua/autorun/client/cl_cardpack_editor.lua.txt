net.Receive("CrowsPack_SendConfig", function()
    local config = net.ReadTable()
    local frame = vgui.Create("DFrame")
    frame:SetSize(500, 400)
    frame:Center()
    frame:SetTitle("Card Pack Rarity Distribution Editor")
    frame:MakePopup()

    local y = 30
    local sliders = {}

    for rarity, max in pairs(config) do
        local slider = vgui.Create("DNumSlider", frame)
        slider:SetText(rarity .. " Max")
        slider:SetMin(0)
        slider:SetMax(10)
        slider:SetDecimals(0)
        slider:SetValue(max)
        slider:SetPos(20, y)
        slider:SetSize(460, 40)

        sliders[rarity] = slider
        y = y + 45
    end

    local saveButton = vgui.Create("DButton", frame)
    saveButton:SetText("ðŸ’¾ Save Distribution")
    saveButton:SetSize(200, 30)
    saveButton:SetPos(150, y + 20)
    saveButton.DoClick = function()
        local newConfig = {}
        for rarity, slider in pairs(sliders) do
            newConfig[rarity] = slider:GetValue()
        end

        net.Start("CrowsPack_SaveConfig")
            net.WriteTable(newConfig)
        net.SendToServer()

        frame:Close()
    end
end)

concommand.Add("crows_editpacks", function(ply)
    if not IsValid(ply) or not ply:IsAdmin() then return end
    net.Start("CrowsPack_RequestConfig")
    net.SendToServer()
end)
